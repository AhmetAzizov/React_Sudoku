(function(){"use strict";function i(o,a,l){return o*l+a}function _(o,a,l,p,n){for(var c=0;c<n;c++)if(c!=a&&o[i(c,l,n)]==p||c!=l&&o[i(a,c,n)]==p)return!1;for(var M=Math.floor(a/(n/3)),r=Math.floor(l/3),e=0;e<n/3;e++)for(var f=M*(n/3)+e,t=0;t<3;t++){var s=r*3+t;if(!(f==a&&s==l)&&o[i(f,s,n)]==p)return!1}return!0}let v=[],d=[];onmessage=o=>{const[a,l]=o.data,p=Array(a).fill(0).map((r,e)=>e+1);M(),c(),postMessage([v,d]);function n(){return p.sort(()=>Math.random()-.5).slice()}function c(){let r,e;for(var f=0;f<a;f++){e=Array(a).fill(0).map((s,u)=>u);for(var t=1;t<l;t++)r=Math.floor(Math.random()*e.length),v[i(f,e[r],a)]=null,e.splice(r,1);e.forEach(s=>{d.push(i(f,s,a))})}}function M(){var r=0;let e,f=Date.now();for(var t=0;t<a;t++)for(var s=n(),u=0,h=0;h<a;h++){var g=Math.floor(Math.random()*s.length),D=s[g];if(_(v,t,h,D,a)?(v[i(t,h,a)]=D,s.splice(g,1)):(u++,h--),e=Date.now()-f,e>300){f=Date.now(),t=-1,u=0,r=0,v=[];break}if(u>40&&(v.splice(i(t,0,a)),h=-1,u=0,s=n(),r++),r>50){v.splice(i(t-1,0,a)),t--,t>-1&&t--;break}}}}})();
