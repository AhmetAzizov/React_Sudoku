(function(){"use strict";function s(v,e,i){return v*i+e}function _(v,e,i,p,n){for(var c=0;c<n;c++)if(c!=e&&v[s(c,i,n)]==p||c!=i&&v[s(e,c,n)]==p)return!1;console.log("checked");for(var M=Math.floor(e/(n/3)),r=Math.floor(i/3),t=0;t<n/3;t++)for(var f=M*(n/3)+t,a=0;a<3;a++){var l=r*3+a;if(!(f==e&&l==i)&&v[s(f,l,n)]==p)return!1}return!0}let o=[],d=[];onmessage=v=>{const[e,i]=v.data,p=Array(e).fill(0).map((r,t)=>t+1);M(),c(),postMessage([o,d]);function n(){return p.sort(()=>Math.random()-.5).slice()}function c(){let r,t;for(var f=0;f<e;f++){t=Array(e).fill(0).map((l,h)=>h);for(var a=1;a<i;a++)r=Math.floor(Math.random()*t.length),o[s(f,t[r],e)]=null,t.splice(r,1);t.forEach(l=>{d.push(s(f,l,e))})}}function M(){var r=0;let t,f=Date.now();for(var a=0;a<e;a++)for(var l=n(),h=0,u=0;u<e;u++){var g=Math.floor(Math.random()*l.length),D=l[g];if(_(o,a,u,D,e)?(o[s(a,u,e)]=D,l.splice(g,1)):(h++,u--),t=Date.now()-f,t>300){f=Date.now(),a=-1,h=0,r=0,o=[];break}if(h>40&&(o.splice(s(a,0,e)),u=-1,h=0,l=n(),r++),r>50){o.splice(s(a-1,0,e)),a--,a>-1&&a--;break}}}}})();
